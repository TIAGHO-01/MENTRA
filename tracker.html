<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Mentra - Peer Mentorship App</title>
  <link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <link rel="stylesheet" href="styles.css">

</head>
<body>
  <!-- Top navigation bar -->
  <div class="top-bar">
    <div class="app-name">MENTRA</div>
    <div class="page-name">Mentors Insights</div>
    <div class="top-right">
      <div class="help-icon" title="Help">Help</div>
    </div>
  </div>

  <!-- Main frame container -->
  <div class="container">
    <!-- Frame 1: Discord-style Sidebar -->
  <div class="sidebar">
  <div class="sidebar-top-group">
  <div class="app-logo">
    <img src="mentra.jpg" alt="Mentra Logo" />
  </div>
</div>

  <div class="bottom-icons">
    <button class="icon-btn" title="Settings"><i class="fas fa-cog"></i></button>
  </div>
</div>

    <!-- Frame 2: My Mentors panel -->
    <div class="left-panel">
      <div class="section-title">Mentors</div>

  <!-- Search bar for mentors -->
  <div class="mentor-search">
    <input type="text" placeholder="Search mentor">
  </div>


  <!-- mentor list -->
<div class="mentor-list">
  <div class="mentor-item">
    <div class="mentor-avatar"></div>
    <span class="mentor-name">Tanke Micheal</span>
  </div>
  <div class="mentor-item">
    <div class="mentor-avatar"></div>
    <span class="mentor-name">Tchinda Vianney </span>
  </div>
  <div class="mentor-item">
    <div class="mentor-avatar"></div>
    <span class="mentor-name">Teneng Courage</span>
  </div>
</div>

    </div>

    <div class="center-panel">
      
      <div class="fiter-options">
        <button class="filter">Last 24-Hours</button>
        <button class="filter">Last 7-days</button>
        <button class="filter">Last Month</button>
        <button class="filter">Last 3-Months</button>
        <button class="filter">Last Year</button>
      </div>

      <div class="chart">
        <canvas id="timeChart"></canvas>

        <div class="updates"></div>
      </div>

    </div><!-- Frame 3 -->

  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
async function fetchSessions(range = '') {
  const url = `http://localhost:3000/sessions${range ? '?range=' + range : ''}`;
  const res = await fetch(url);
  const data = await res.json();

  const labels = data.map(row => row.session_date);
  const durations = data.map(row => row.duration);

  const ctx = document.getElementById('timeChart').getContext('2d');

  if (window.chart) window.chart.destroy(); // prevent overlapping
  window.chart = new Chart(ctx, {
    type: 'line',
    data: {
      labels,
      datasets: [{
        label: 'Session Duration (min)',
        data: durations,
        borderColor: '#290583',
        borderWidth: 2,
        fill: false,
      }]
    },
    options: {
      responsive: true,
      scales: {
        x: {
          ticks: { color: '#fff' }
        },
        y: {
          beginAtZero: true,
          ticks: { color: '#fff' }
        }
      }
    }
  });
}

document.querySelectorAll('.filter').forEach(button => {
  button.addEventListener('click', () => {
    const label = button.textContent.trim().toLowerCase();
    const rangeMap = {
      'last 24-hours': '24h',
      'last 7-days': '7d',
      'last month': '1m',
      'last 3-months': '3m',
      'last year': '1y',
    };
    fetchSessions(rangeMap[label] || '');
  });
});

fetchSessions(); // Load initial chart
</script>
  
</body>
</html>
